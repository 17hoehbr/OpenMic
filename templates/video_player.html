{% extends 'tv_base.html' %}
{% block head %}
  <style>
    video{
      width: 100vw;
      height: 100vh;
      object-fit: cover;
      position: fixed;
      top: 0;
      left: 0;
    }
  </style>
{% endblock %}

{% block content %}
  <script>
    const socket = io("{{ url_for('index') }}");
    const video = document.getElementById('video');

    socket.on('player_restart', function() {
      video.currentTime = 0;
    });

    socket.on('player_pause', function() {
      if (!video.paused) {
          video.pause();
      } else {
          video.play();
      }
    });

    socket.on('player_skip', function() {
      video.currentTime = video.duration;
    });

    video.addEventListener('ended',function(){
        location.href = "{{ url_for('tv') }}";
    });
  </script>
  
  <video id="video" autoplay>
      <source src="./songs/{{ song_queue[0] }}" type="video/mp4">
  </video>
{% endblock %}